<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatBot Hotel IA</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif']
                    },
                    colors: {
                        primary: {
                            50: '#f0fdf4',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .message-animation {
            animation: fadeInUp 0.3s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(16px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .typing-dots span {
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Custom scrollbar */
        .scrollbar-thin::-webkit-scrollbar {
            width: 4px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background-color: rgba(156, 163, 175, 0.5);
            border-radius: 2px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background-color: rgba(156, 163, 175, 0.8);
        }
        
        .dark .scrollbar-thin::-webkit-scrollbar-thumb {
            background-color: rgba(75, 85, 99, 0.5);
        }
        
        .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background-color: rgba(75, 85, 99, 0.8);
        }
    </style>
</head>
<body class="font-sans bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
    <div class="flex flex-col h-screen">
        <!-- Header -->
        <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 sm:px-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="flex items-center justify-center w-10 h-10 bg-primary-500 rounded-xl">
                        <i class="fas fa-hotel text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-semibold text-gray-900 dark:text-white">Asistente del Hotel</h1>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                            <span class="text-xs text-gray-500 dark:text-gray-400">En línea</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2">
                    <!-- Theme Toggle -->
                    <button id="theme-toggle" class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors">
                        <i class="fas fa-sun text-lg dark:hidden"></i>
                        <i class="fas fa-moon text-lg hidden dark:block"></i>
                    </button>
                    
                    <!-- Clear Chat -->
                    <button id="clear-chat" class="p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" title="Limpiar chat">
                        <i class="fas fa-broom text-lg"></i>
                    </button>
                    
                    <!-- User Avatar -->
                    <div class="flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 rounded-lg px-3 py-2">
                        <div class="w-6 h-6 bg-primary-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-xs"></i>
                        </div>
                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300 hidden sm:block">Usuario</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Chat Messages -->
        <main class="flex-1 overflow-hidden">
            <div id="chat-messages" class="h-full overflow-y-auto scrollbar-thin px-4 py-6 sm:px-6">
                <!-- Welcome Message -->
                <div class="message-animation">
                    <div class="flex items-start space-x-3 mb-6">
                        <div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-gray-600 dark:text-gray-300 text-sm"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm border border-gray-200 dark:border-gray-700">
                                <p class="text-gray-800 dark:text-gray-200 mb-3">¡Hola! Soy el asistente virtual del hotel. ¿En qué puedo ayudarte hoy?</p>
                                
                                <!-- Quick Questions -->
                                <div class="space-y-2">
                                    <p class="text-sm text-gray-600 dark:text-gray-400 font-medium">Preguntas frecuentes:</p>
                                    <div class="flex flex-wrap gap-2">
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Qué tipos de habitaciones tienes?">
                                            <i class="fas fa-clock mr-1"></i>
                                            Habitaciones
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Qué precios tienen las habitaciones?">
                                            <i class="fas fa-concierge-bell mr-1"></i>
                                            Precios
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Cómo puedo contactar al hotel?">
                                            <i class="fas fa-calendar mr-1"></i>
                                            Contacto
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Qué calificaciones tiene el hotel?">
                                            <i class="fas fa-map-marker-alt mr-1"></i>
                                            Calificaciones
                                        </button>
                                        <!--<button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Cuál es la política de cancelación?">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            Políticas
                                        </button>-->
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 dark:text-gray-400 mt-2 ml-2">Ahora</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Input Area -->
        <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 sm:p-6">
            <div class="max-w-4xl mx-auto">
                <div class="flex items-end space-x-3">
                    <div class="flex-1 relative">
                        <textarea 
                            id="user-input" 
                            placeholder="Escribe tu mensaje..."
                            rows="1"
                            class="w-full resize-none border border-gray-300 dark:border-gray-600 rounded-2xl px-4 py-3 pr-12 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all max-h-32"
                        ></textarea>
                        <button 
                            id="send-btn" 
                            disabled
                            class="absolute right-2 bottom-2 w-8 h-8 bg-primary-500 hover:bg-primary-600 disabled:bg-gray-300 dark:disabled:bg-gray-600 disabled:cursor-not-allowed rounded-full flex items-center justify-center text-white transition-all transform hover:scale-105 disabled:hover:scale-100"
                        >
                            <i class="fas fa-paper-plane text-sm"></i>
                        </button>
                    </div>
                </div>
                <p class="text-xs text-gray-500 dark:text-gray-400 text-center mt-3">
                    El asistente puede cometer errores. Verifica la información importante.
                </p>
            </div>
        </footer>
    </div>

    <script>
        let isTyping = false;
        
        // Theme management
        const themeToggle = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        
        // Check for saved theme preference or default to 'light'
        const currentTheme = localStorage.getItem('theme') || 'light';
        
        if (currentTheme === 'dark') {
            htmlElement.classList.add('dark');
        }
        
        themeToggle.addEventListener('click', function() {
            htmlElement.classList.toggle('dark');
            
            const theme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
        });
        
        // Chat functionality
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');
        const clearChatBtn = document.getElementById('clear-chat');
        
        // Auto-resize textarea
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 128) + 'px';
            sendBtn.disabled = !this.value.trim();
        });
        
        // Send message on Enter
        userInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        // Send button click
        sendBtn.addEventListener('click', sendMessage);
        
        // Quick questions
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('quick-question') || e.target.parentElement.classList.contains('quick-question')) {
                const button = e.target.classList.contains('quick-question') ? e.target : e.target.parentElement;
                const question = button.getAttribute('data-question');
                userInput.value = question;
                sendMessage();
            }
        });
        
        // Clear chat
        clearChatBtn.addEventListener('click', clearChat);
        
        function sendMessage() {
            const message = userInput.value.trim();
            
            if (!message || isTyping) return;
            
            // Add user message
            addMessage(message, 'user');
            
            // Clear input
            userInput.value = '';
            userInput.style.height = 'auto';
            sendBtn.disabled = true;
            
            // Show typing indicator
            showTypingIndicator();
            
            // Send to server (replace with your backend endpoint)
            fetch('chatbot.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: 'mensaje=' + encodeURIComponent(message)
            })
            .then(res => res.text())
            .then(data => {
                hideTypingIndicator();
                addMessage(data, 'bot');
            })
            .catch(error => {
                hideTypingIndicator();
                addMessage('Lo siento, ha ocurrido un error. Por favor, inténtalo de nuevo.', 'bot', true);
                console.error('Error:', error);
            });
        }
        
        function addMessage(content, sender, isError = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-animation';
            
            const time = new Date().toLocaleTimeString('es-ES', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-3 mb-6 justify-end">
                        <div class="flex-1 min-w-0 flex flex-col items-end">
                            <div class="bg-primary-500 text-white rounded-2xl rounded-tr-sm px-4 py-3 max-w-xs sm:max-w-md lg:max-w-lg">
                                <p>${content}</p>
                            </div>
                            <div class="text-xs text-gray-500 dark:text-gray-400 mt-2 mr-2">${time}</div>
                        </div>
                        <div class="w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-3 mb-6">
                        <div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-gray-600 dark:text-gray-300 text-sm"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="bg-white dark:bg-gray-800 ${isError ? 'border-red-200 dark:border-red-800' : 'border-gray-200 dark:border-gray-700'} rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm border max-w-xs sm:max-w-md lg:max-w-lg">
                                <p class="${isError ? 'text-red-600 dark:text-red-400' : 'text-gray-800 dark:text-gray-200'}">${content}</p>
                            </div>
                            <div class="text-xs text-gray-500 dark:text-gray-400 mt-2 ml-2">${time}</div>
                        </div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function showTypingIndicator() {
            isTyping = true;
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message-animation';
            
            typingDiv.innerHTML = `
                <div class="flex items-start space-x-3 mb-6">
                    <div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-gray-600 dark:text-gray-300 text-sm"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="bg-white dark:bg-gray-800 rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm border border-gray-200 dark:border-gray-700">
                            <div class="typing-dots flex space-x-1">
                                <span class="w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full"></span>
                                <span class="w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full"></span>
                                <span class="w-2 h-2 bg-gray-400 dark:bg-gray-500 rounded-full"></span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function hideTypingIndicator() {
            isTyping = false;
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }
        
        function clearChat() {
            chatMessages.innerHTML = `
                <div class="message-animation">
                    <div class="flex items-start space-x-3 mb-6">
                        <div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-gray-600 dark:text-gray-300 text-sm"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="bg-white dark:bg-gray-800 rounded-2xl rounded-tl-sm px-4 py-3 shadow-sm border border-gray-200 dark:border-gray-700">
                                <p class="text-gray-800 dark:text-gray-200 mb-3">¡Hola! Soy el asistente virtual del hotel. ¿En qué puedo ayudarte hoy?</p>
                                
                                <div class="space-y-2">
                                    <p class="text-sm text-gray-600 dark:text-gray-400 font-medium">Preguntas frecuentes:</p>
                                    <div class="flex flex-wrap gap-2">
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Cuáles son los horarios del hotel?">
                                            <i class="fas fa-clock mr-1"></i>
                                            Horarios
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Qué servicios ofrece el hotel?">
                                            <i class="fas fa-concierge-bell mr-1"></i>
                                            Servicios
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Cómo puedo hacer una reserva?">
                                            <i class="fas fa-calendar mr-1"></i>
                                            Reservas
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Qué actividades hay cerca del hotel?">
                                            <i class="fas fa-map-marker-alt mr-1"></i>
                                            Actividades
                                        </button>
                                        <button class="quick-question bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300 px-3 py-2 rounded-full text-sm hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors" data-question="¿Cuál es la política de cancelación?">
                                            <i class="fas fa-info-circle mr-1"></i>
                                            Políticas
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 dark:text-gray-400 mt-2 ml-2">Ahora</div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Focus input on load
        document.addEventListener('DOMContentLoaded', function() {
            userInput.focus();
        });
    </script>
</body>
</html>